<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BobaMasterFPS ‚Äî Support & Links (Full, White Glow)</title>

  <!-- Fonts & Libraries -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    /* =========================================================================
       THEME / ROOT VARS
       ========================================================================= */
    :root{
      --bg: #000000;                       /* page background (black) */
      --card-bg: rgba(18,18,18,0.66);      /* translucent glass card */
      --border: rgba(255,255,255,0.06);    /* subtle white border */
      --muted: #bfbfbf;                    /* muted white for secondary text */
      --accent: #ffffff;                   /* primary white accent color */
      --glass-padding: 36px;
      --font: 'Poppins', sans-serif;

      /* Glow specifics ‚Äî strictly white only */
      --glow-white-strong: rgba(255,255,255,0.98);
      --glow-white-medium: rgba(255,255,255,0.32);
      --glow-white-soft: rgba(255,255,255,0.12);

      /* shadows */
      --shadow-dark: rgba(0,0,0,0.64);
      --shadow-soft: rgba(0,0,0,0.46);

      /* animation timing */
      --float-duration: 4.8s;
      --pulse-duration: 1.6s;

      /* responsive break */
      --max-width: 560px;
    }

    /* =========================================================================
       BASIC RESET
       ========================================================================= */
    *{ box-sizing: border-box; margin:0; padding:0; -webkit-tap-highlight-color: transparent; }
    html,body{ height:100%; }
    body{
      min-height:100vh;
      font-family:var(--font);
      background: var(--bg) url('c7e35a6e-fe4c-4cc4-85a8-972250ec4c08.png') center/cover fixed no-repeat;
      color: var(--accent);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
      overflow:hidden; /* keep page clean; snow is appended to body */
    }

    /* =========================================================================
       CARD / LAYOUT
       ========================================================================= */
    .container{
      width:100%;
      max-width:var(--max-width);
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: var(--glass-padding);
      text-align:center;
      backdrop-filter: blur(14px) saturate(1.05);
      box-shadow: 0 12px 48px var(--shadow-dark);
      position: relative;
      overflow: visible;
      transition: transform .36s cubic-bezier(.2,.9,.2,1), box-shadow .36s;
    }
    .container:hover{ transform: translateY(-6px); box-shadow: 0 28px 90px var(--shadow-dark); }

    /* =========================================================================
       AVATAR
       ========================================================================= */
    .avatar{
      width:132px;
      height:132px;
      margin: 0 auto 12px;
      border-radius:50%;
      overflow:hidden;
      border: 2px solid rgba(255,255,255,0.12);
      transition: transform .45s ease, box-shadow .35s;
      display:inline-block;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    }
    .avatar img{ width:100%; height:100%; object-fit:cover; display:block; }

    .avatar:hover{
      transform: scale(1.06);
      box-shadow: 0 18px 50px rgba(0,0,0,0.6), 0 0 14px var(--glow-white-medium);
    }

    /* =========================================================================
       TEXT + GLOW (white only)
       ========================================================================= */
    .title{
      font-weight:800;
      font-size:28px;
      margin-bottom:4px;
      color:var(--accent);
      text-shadow:
        0 0 6px var(--glow-white-strong),
        0 0 18px var(--glow-white-medium);
      animation: titlePulse 3.6s ease-in-out infinite;
      letter-spacing: -0.6px;
    }

    .subtitle{
      font-size:13px;
      color:var(--muted);
      margin-bottom:10px;
      text-shadow: 0 0 6px rgba(255,255,255,0.12);
    }

    @keyframes titlePulse {
      0% { text-shadow: 0 0 5px rgba(255,255,255,0.9), 0 0 12px rgba(255,255,255,0.12); transform: translateY(0); }
      50% { text-shadow: 0 0 9px rgba(255,255,255,1), 0 0 28px rgba(255,255,255,0.18); transform: translateY(-2px); }
      100% { text-shadow: 0 0 5px rgba(255,255,255,0.9), 0 0 12px rgba(255,255,255,0.12); transform: translateY(0); }
    }

    .status{
      background: rgba(255,255,255,0.03);
      border:1px solid var(--border);
      border-radius:10px;
      padding:10px;
      margin: 12px auto;
      font-size:13px;
      color:#eaeaea;
      line-height:1.4;
      max-width:520px;
      text-shadow: 0 0 6px rgba(255,255,255,0.06);
    }

    /* =========================================================================
       LIVE INDICATOR
       ========================================================================= */
    .live-wrap{ display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:8px; }
    .live-btn{ cursor:pointer; display:flex; align-items:center; gap:10px; border-radius:12px; padding:6px 10px; transition:background .2s; }
    .live-btn:hover{ background: rgba(255,255,255,0.02); }

    .live-dot{
      width:12px; height:12px; border-radius:50%;
      background:#3a3a3a; box-shadow:none; transition:all .25s;
    }
    .live-dot.on{
      background: #ffffff;
      box-shadow: 0 0 8px var(--glow-white-strong), 0 0 18px var(--glow-white-medium);
      animation:livePulse 1s infinite alternate;
      transform-origin:center;
    }
    .live-dot.off{ background:#3a3a3a; box-shadow:none; opacity:0.9; }
    @keyframes livePulse { from{ transform: scale(1); } to{ transform: scale(1.45); } }

    .live-text{
      font-size:14px;
      color:var(--muted);
      transition: color .18s, text-shadow .18s;
      max-width:320px;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }

    /* =========================================================================
       SOCIAL ICON ROW
       ========================================================================= */
    .socials{ display:flex; justify-content:center; gap:12px; margin:12px 0 8px; align-items:center; flex-wrap:wrap; }
    .social-item{
      width:52px; height:52px; border-radius:12px; display:flex; align-items:center; justify-content:center;
      text-decoration:none; background:rgba(255,255,255,0.02); color:var(--accent);
      box-shadow: 0 8px 34px rgba(0,0,0,0.6);
      transition: transform .36s cubic-bezier(.2,.9,.2,1), box-shadow .36s, filter .36s;
      -webkit-backdrop-filter: blur(6px);
      backdrop-filter: blur(6px);
      border:1px solid rgba(255,255,255,0.03);
      position:relative; overflow:visible; cursor:pointer; user-select:none;
      will-change: transform, box-shadow, filter;
      display:inline-flex;
      align-items:center;
      justify-content:center;
    }

    .social-item svg{ width:24px; height:24px; fill: var(--accent); display:block; filter: drop-shadow(0 6px 18px rgba(0,0,0,0.6)); transition: transform .28s, filter .28s; }

    .social-item::after{
      content:'';
      position:absolute;
      inset:0;
      border-radius:12px;
      box-shadow: 0 0 8px var(--glow-white-soft);
      opacity:0.55;
      pointer-events:none;
      transition: box-shadow .28s, opacity .28s;
    }

    .social-item:hover,
    .social-item:focus {
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 30px 80px rgba(0,0,0,0.68), 0 0 20px var(--glow-white-medium);
      outline: none;
    }
    .social-item:hover svg,
    .social-item:focus svg {
      transform: translateY(-2px) scale(1.06);
      filter: drop-shadow(0 4px 20px var(--glow-white-medium));
    }
    .social-item:hover::after,
    .social-item:focus::after {
      box-shadow: 0 0 16px var(--glow-white-medium), 0 0 36px var(--glow-white-medium);
      opacity:1;
    }

    /* =========================================================================
       QR + DONATION AMOUNTS
       ========================================================================= */
    .qwrap{
      width:156px; height:156px; margin:12px auto 6px; border-radius:14px; display:flex; align-items:center; justify-content:center;
      background: rgba(255,255,255,0.03); border:1px solid var(--border);
      animation: floatY 5.6s ease-in-out infinite;
      box-shadow: 0 8px 40px rgba(0,0,0,0.6);
    }
    #qrcode{ width:136px; height:136px; display:block; border-radius:8px; background:#fff; }

    .donation-amounts{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:18px; }
    .amount-btn{
      padding:11px 16px; border-radius:12px; cursor:pointer;
      background: rgba(255,255,255,0.06); color:var(--accent); font-weight:700;
      border:1px solid rgba(255,255,255,0.04); min-width:76px; text-align:center;
      transition: transform .28s cubic-bezier(.2,.9,.2,1), background .18s ease, box-shadow .28s, text-shadow .28s;
      user-select:none;
      animation: floatY 4.9s ease-in-out infinite;
      text-shadow: 0 0 6px rgba(255,255,255,0.04);
    }
    .amount-btn:hover{ transform: translateY(-10px) scale(1.03); background: rgba(255,255,255,0.12); }
    .amount-btn:focus{ outline: none; box-shadow: 0 12px 40px rgba(0,0,0,0.6), 0 0 14px var(--glow-white-medium); }
    .amount-btn.selected{
      background: #ffffff; color:#000; transform:scale(1.06);
      box-shadow: 0 24px 70px rgba(0,0,0,0.62), 0 0 18px var(--glow-white-medium);
      border:1px solid rgba(255,255,255,0.5);
      text-shadow: 0 0 10px var(--glow-white-strong), 0 0 28px var(--glow-white-medium);
    }

    /* =========================================================================
       PAY BUTTON
       ========================================================================= */
    .pay-row{ margin-top:16px; display:flex; justify-content:center; gap:10px; align-items:center; }
    #payBtn{
      padding:12px 26px; border-radius:14px; background:#ffffff; color:#000; border:none; font-weight:800; cursor:pointer;
      transition: transform .16s ease, box-shadow .16s ease, text-shadow .16s ease;
      box-shadow: 0 12px 44px var(--shadow-dark);
      animation: floatY 5.2s ease-in-out infinite;
    }
    #payBtn:hover{ transform: translateY(-8px); box-shadow: 0 30px 80px var(--shadow-dark); }
    #payBtn:focus{ outline:none; box-shadow: 0 28px 70px var(--shadow-dark), 0 0 18px var(--glow-white-medium); }

    .help-note{ font-size:12px; color:var(--muted); margin-top:10px; }

    /* =========================================================================
       MODALS
       ========================================================================= */
    .modal{
      position:fixed; left:0; top:0; width:100%; height:100%;
      display:none; align-items:center; justify-content:center;
      background: rgba(0,0,0,0.66); z-index:1200;
    }
    .modal.show{ display:flex; }
    .modal-card{
      width:92%; max-width:420px; background:var(--card-bg); border-radius:14px; padding:20px; text-align:center;
      border:1px solid var(--border); box-shadow:0 30px 80px rgba(0,0,0,0.7);
      transform: translateY(0); animation: popIn .36s cubic-bezier(.2,.9,.2,1);
    }
    @keyframes popIn { from{ transform: translateY(8px) scale(.98); opacity:0 } to{ transform: translateY(0) scale(1); opacity:1 } }

    /* =========================================================================
       SNOWFALL (will be optimized/auto-disabled on Android)
       ========================================================================= */
    .snowflake{
      position: fixed;
      top: -16px;
      color: #ffffff;
      font-size: 10px;
      opacity: .88;
      pointer-events: none;
      z-index: 9999;
      will-change: transform, opacity;
      text-shadow: 0 2px 6px rgba(0,0,0,0.6);
    }

    /* =========================================================================
       RESPONSIVE TWEAKS
       ========================================================================= */
    @media (max-width:480px){
      .container{ padding:20px; max-width:420px; }
      .avatar{ width:110px; height:110px; }
      .title{ font-size:22px; }
      .social-item{ width:46px; height:46px; }
      .qwrap{ width:138px; height:138px; }
      .amount-btn{ min-width:64px; padding:9px 12px; }
    }

    /* keyboard focus visible */
    .social-item:focus-visible,
    .amount-btn:focus-visible,
    #payBtn:focus-visible,
    .live-btn:focus-visible{
      outline: 2px solid rgba(255,255,255,0.12);
      outline-offset: 6px;
    }

    /* small helper rule to ensure anchors are accessible */
    a.social-item { display: inline-flex; }
  </style>
</head>
<body>

  <!-- MAIN CARD -->
  <div class="container" id="mainCard" role="region" aria-label="Support card">

    <!-- Avatar -->
    <div class="avatar" title="BobaMasterFPS avatar" aria-hidden="false">
      <img src="https://i.ibb.co/kVqQnJR0/IMG-20250628-110410-817.webp" alt="BobaMasterFPS Avatar">
    </div>

    <!-- Live indicator -->
    <div class="live-wrap" aria-hidden="false">
      <div class="live-btn" id="liveBtn" title="Open Twitch channel" role="button" tabindex="0" aria-pressed="false" aria-label="Twitch live status">
        <div id="liveDot" class="live-dot off" aria-hidden="true"></div>
        <div id="liveText" class="live-text" aria-live="polite">Checking status...</div>
      </div>
    </div>

    <!-- Title / subtitle -->
    <div class="title" id="mainTitle">BobaMasterFPS</div>
    <div class="subtitle" id="mainSubtitle">Competitive FPS Streamer</div>

    <!-- Bio / status -->
    <div class="status" id="bioBlock">
      Competitive FPS streamer ‚Ä¢ Jokes, gameplay & community. Drop by the stream ‚Äî your support helps upgrades, giveaways & more!
    </div>

    <!-- Social icons -->
    <div class="socials" aria-hidden="false" role="navigation" aria-label="Social links">
      <!-- Discord -->
      <a class="social-item" id="discordLink" href="https://discord.gg/K79u8V5FRd" target="_blank" rel="noopener noreferrer" title="Discord" aria-label="Discord invite" tabindex="0">
        <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M20.317 4.369a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.08.037 13.69 13.69 0 00-.607 1.25 18.753 18.753 0 00-5.772 0 12.663 12.663 0 00-.615-1.25.073.073 0 00-.08-.037A19.736 19.736 0 003.68 4.37a.067.067 0 00-.03.025C.533 9.045-.319 13.496.066 17.858a.082.082 0 00.031.056 19.916 19.916 0 006.11 3.07.075.075 0 00.082-.027c.47-.65.889-1.338 1.248-2.057a.075.075 0 00-.041-.104 13.87 13.87 0 01-1.97-.94.075.075 0 01-.007-.125c.132-.1.264-.202.393-.307a.075.075 0 01.081-.011c4.117 1.882 8.56 1.882 12.61 0a.075.075 0 01.083.01c.13.105.263.207.396.308a.075.075 0 01-.006.125c-.607.39-1.254.717-1.97.94a.075.075 0 00-.04.104c.36.72.78 1.407 1.25 2.058a.075.075 0 00.082.028 19.954 19.954 0 006.112-3.07.075.075 0 00.031-.056c.5-4.91-.838-9.336-3.548-13.464a.067.067 0 00-.03-.025zM8.02 15.331c-1.183 0-2.156-1.085-2.156-2.419 0-1.333.955-2.418 2.156-2.418 1.21 0 2.183 1.095 2.156 2.418 0 1.334-.946 2.419-2.156 2.419zm7.974 0c-1.183 0-2.156-1.085-2.156-2.419 0-1.333.955-2.418 2.156-2.418 1.21 0 2.183 1.095 2.156 2.418 0 1.334-.946 2.419-2.156 2.419z"/></svg>
      </a>

      <!-- Twitch -->
      <a class="social-item" id="twitchLink" href="https://www.twitch.tv/bobamasterfps" target="_blank" rel="noopener noreferrer" title="Twitch" aria-label="Twitch channel" tabindex="0">
        <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M4.652 3.5L3 6.153v11.694h5.063V22h2.61l2.41-2.153H19L21 16.347V3.5H4.652zM18.5 14.5l-1.25 1.25h-3.5l-1.25 1.25V14.5H6.25V4.75h12.25V14.5zM15.25 8.75h-1.5v3.5h1.5v-3.5zM11.5 8.75h-1.5v3.5h1.5v-3.5z"/></svg>
      </a>

      <!-- YouTube -->
      <a class="social-item" id="youtubeLink" href="https://www.youtube.com/@bobamasterfps" target="_blank" rel="noopener noreferrer" title="YouTube" aria-label="YouTube channel" tabindex="0">
        <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M23.499 6.203a2.903 2.903 0 00-2.043-2.056C19.571 3.5 12 3.5 12 3.5s-7.57 0-9.456.647A2.904 2.904 0 00.5 6.203 30.26 30.26 0 000 12a30.26 30.26 0 00.5 5.797 2.903 2.903 0 002.044 2.056C4.43 20.5 12 20.5 12 20.5s7.571 0 9.456-.647a2.903 2.903 0 002.043-2.056A30.26 30.26 0 0024 12a30.26 30.26 0 00-.501-5.797zM9.75 15.5v-7l6 3.5-6 3.5z"/></svg>
      </a>

      <!-- Twitter/X -->
      <a class="social-item" id="twitterLink" href="https://x.com/bobamasterfps" target="_blank" rel="noopener noreferrer" title="X / Twitter" aria-label="Twitter/X" tabindex="0">
        <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M22.162 5.656c-.63.28-1.306.47-2.016.556.726-.436 1.284-1.127 1.547-1.95-.68.403-1.433.695-2.235.852C18.75 4.18 17.822 3.75 16.78 3.75c-1.562 0-2.83 1.266-2.83 2.828 0 .222.02.438.065.645-2.353-.118-4.44-1.244-5.842-2.957-.243.417-.383.902-.383 1.418 0 .98.498 1.846 1.256 2.354-.464-.015-.9-.142-1.282-.354v.036c0 1.366.973 2.504 2.263 2.762-.236.064-.485.099-.742.099-.181 0-.357-.017-.528-.05.357 1.115 1.395 1.928 2.626 1.95-0.96.753-2.167 1.203-3.48 1.203-.226 0-.448-.013-.665-.039 1.241.797 2.714 1.263 4.297 1.263 5.158 0 7.98-4.274 7.98-7.98 0-.122-.003-.243-.009-.364.55-.395 1.028-.887 1.404-1.45-.503.223-1.044.373-1.61.441.582-.348 1.03-.9 1.241-1.557z"/></svg>
      </a>
    </div>

    <!-- QR -->
    <div class="qwrap" aria-hidden="false" title="Scan to pay">
      <canvas id="qrcode" width="136" height="136" role="img" aria-label="UPI QR code"></canvas>
    </div>
    <div style="font-size:13px;color:#d0d0d0;margin-top:6px">Donate via UPI: <b style="text-shadow: 0 0 8px rgba(255,255,255,0.9);">lazy.saifali@fam</b></div>

    <!-- Donation amounts -->
    <div class="donation-amounts" role="group" aria-label="Donation amounts">
      <div class="amount-btn" data-amount="20" tabindex="0" role="button" aria-pressed="false">‚Çπ20</div>
      <div class="amount-btn" data-amount="50" tabindex="0" role="button" aria-pressed="false">‚Çπ50</div>
      <div class="amount-btn" data-amount="70" tabindex="0" role="button" aria-pressed="false">‚Çπ70</div>
      <div class="amount-btn" data-amount="100" tabindex="0" role="button" aria-pressed="false">‚Çπ100</div>
    </div>

    <!-- Pay -->
    <div class="pay-row">
      <button id="payBtn" title="Open your UPI app to pay" aria-label="Pay">Pay</button>
    </div>
    <div class="help-note">Select an amount then click <strong>Pay</strong>. Payment opens the UPI app on mobile/desktop.</div>
  </div>

  <!-- MODALS -->
  <div id="thanksModal" class="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="thanksTitle">
      <div class="closeX" onclick="closeAllModals()" aria-hidden="true" tabindex="0" style="position:absolute;right:16px;top:14px;font-size:22px;color:var(--muted);cursor:pointer;">&times;</div>
      <div class="thanks-emoji">üéâ</div>
      <div id="thanksTitle" class="modal-title">Thank You!</div>
      <div id="thanksText" class="modal-text">Your support means the world. You're helping the stream grow ‚Äî much love! ‚ù§Ô∏è</div>
    </div>
  </div>

  <div id="sadModal" class="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="sadTitle">
      <div class="closeX" onclick="closeAllModals()" aria-hidden="true" tabindex="0" style="position:absolute;right:16px;top:14px;font-size:22px;color:var(--muted);cursor:pointer;">&times;</div>
      <div class="sad-emoji">üò¢</div>
      <div id="sadTitle" class="modal-title">Payment not completed</div>
      <div id="sadText" class="modal-text">Looks like the payment wasn't completed. If this was a mistake, try again ‚Äî we appreciate you! üíô</div>
    </div>
  </div>

  <!-- SCRIPTS -->
  <script>
    /**************************************************************************
     * CONFIG & constants (PLACEHOLDERS)
     *
     * IMPORTANT: Replace these with your own values locally before running.
     * - TWITCH_CLIENT_ID: your Twitch App's Client ID
     * - TWITCH_TOKEN: your App Access Token (generate via client_credentials)
     *
     **************************************************************************/
    const TWITCH_CLIENT_ID = 'gp762nuuoqcoxypju8c569th9wz7q5';
    const TWITCH_TOKEN = '5d9j7asmux1owvx5n9lbt6gg9p6hhl';
    const TWITCH_USER = 'bobamasterfps';

    const UPI_ID = 'lazy.saifali@fam';
    const UPI_NAME = 'BobaMasterFPS';
    const UPI_CURRENCY = 'INR';

    /**************************************************************************
     * Lightweight DOM helpers
     **************************************************************************/
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));

    const liveDot = $('#liveDot');
    const liveText = $('#liveText');
    const liveBtn = $('#liveBtn');
    const payBtn = $('#payBtn');

    /**************************************************************************
     * Device detection: We're careful to disable heavy effects on Android.
     * We prefer feature-detection but UA here is a reasonable tradeoff.
     **************************************************************************/
    const ua = navigator.userAgent || '';
    const isAndroid = /Android/i.test(ua) && !/iPad|iPhone|iPod/i.test(ua);
    const isIOS = /iPhone|iPad|iPod/i.test(ua);
    const isDesktop = !isAndroid && !isIOS;
    const allowSnow = !isAndroid; // snow auto-disabled on Android devices (low-end friendly)

    /**************************************************************************
     * QR CODE (QRious)
     **************************************************************************/
    function buildUpiHref(amount = '') {
      const amParam = amount ? `&am=${encodeURIComponent(amount)}` : '';
      return `upi://pay?pa=${encodeURIComponent(UPI_ID)}&pn=${encodeURIComponent(UPI_NAME)}${amParam}&cu=${UPI_CURRENCY}&tn=${encodeURIComponent('Support ' + UPI_NAME)}`;
    }

    function refreshQRCode(selectedAmount = '') {
      const canvas = document.getElementById('qrcode');
      const qrVal = buildUpiHref(selectedAmount || '');
      try {
        new QRious({ element: canvas, value: qrVal, size: 136, background: 'white', foreground: '#000' });
      } catch (e) {
        const ctx = canvas.getContext('2d');
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = '#fff';
        ctx.font = '10px Poppins';
        ctx.fillText('QR error', 10, 64);
      }
    }
    refreshQRCode();

    /**************************************************************************
     * Donation amount interactions
     **************************************************************************/
    let selectedAmount = null;
    const amountButtons = Array.from(document.querySelectorAll('.amount-btn'));
    amountButtons.forEach((btn)=>{
      btn.addEventListener('click', ()=>{
        amountButtons.forEach(b=>{
          b.classList.remove('selected');
          b.setAttribute('aria-pressed','false');
        });
        btn.classList.add('selected');
        btn.setAttribute('aria-pressed','true');
        selectedAmount = btn.dataset.amount;
        refreshQRCode(selectedAmount);
      });
      btn.addEventListener('keydown', (ev)=>{
        if(ev.key === 'Enter' || ev.key === ' ') { ev.preventDefault(); btn.click(); }
      });
    });

/**************************************************************************
 * Continuous Snowfall ‚Äî Infinite, Optimized
 * - Runs forever, regenerating flakes smoothly
 * - Auto-light mode on Android (lower density)
 **************************************************************************/
(function continuousSnow() {
  const ua = navigator.userAgent || '';
  const isAndroid = /Android/i.test(ua) && !/iPad|iPhone|iPod/i.test(ua);
  const isIOS = /iPhone|iPad|iPod/i.test(ua);
  const isDesktop = !isAndroid && !isIOS;

  // Density profiles by device
  const PROFILE = {
    desktop: { spawnEvery: 40, sizeMin: 8, sizeMax: 28 },
    ios: { spawnEvery: 70, sizeMin: 8, sizeMax: 22 },
    android: { spawnEvery: 110, sizeMin: 8, sizeMax: 18 }
  };
  const p = isAndroid ? PROFILE.android : (isIOS ? PROFILE.ios : PROFILE.desktop);

  const glyphs = ['‚ùÜ', '‚ùÖ', '‚úª', '‚ú∑', '‚úµ'];
  let snowId = 0;

  function makeFlake() {
    const el = document.createElement('div');
    el.className = 'snowflake';
    el.id = `flake-${snowId++}`;
    el.textContent = glyphs[Math.floor(Math.random() * glyphs.length)];
    const size = p.sizeMin + Math.random() * (p.sizeMax - p.sizeMin);
    const left = Math.random() * 100;
    const duration = 6 + Math.random() * 8; // seconds
    const rotation = Math.random() * 360;
    const opacity = 0.4 + Math.random() * 0.6;

    el.style.left = left + 'vw';
    el.style.fontSize = size + 'px';
    el.style.opacity = opacity;
    el.style.transform = `translateY(-10vh) rotate(${rotation}deg)`;
    el.style.transition = `transform ${duration}s linear, opacity ${duration}s linear`;
    el.style.pointerEvents = 'none';
    document.body.appendChild(el);

    // Animate
    requestAnimationFrame(() => {
      el.style.transform = `translateY(${window.innerHeight + 120}px) rotate(${rotation + 360}deg)`;
      el.style.opacity = 0.05;
    });

    // Cleanup & respawn
    setTimeout(() => {
      el.remove();
      makeFlake(); // immediately spawn a replacement = continuous loop
    }, duration * 1000);
  }

  // Kick-off
  const initialCount = Math.round(window.innerWidth / 6); // density scale
  for (let i = 0; i < initialCount; i++) {
    setTimeout(makeFlake, i * p.spawnEvery);
  }

  console.info(`Continuous snow started (${isAndroid ? 'light mode' : 'full mode'})`);
})();


    /**************************************************************************
     * Modals helpers
     **************************************************************************/
    const thanksModal = document.getElementById('thanksModal');
    const sadModal = document.getElementById('sadModal');
    function openThanksModal(){ burstConfetti(); thanksModal.classList.add('show'); thanksModal.setAttribute('aria-hidden','false'); }
    function openSadModal(title, text){ if(title) document.getElementById('sadTitle').innerText = title; if(text) document.getElementById('sadText').innerText = text; sadModal.classList.add('show'); sadModal.setAttribute('aria-hidden','false'); }
    function closeAllModals(){ thanksModal.classList.remove('show'); thanksModal.setAttribute('aria-hidden','true'); sadModal.classList.remove('show'); sadModal.setAttribute('aria-hidden','true'); }
    [thanksModal, sadModal].forEach(m=>{
      m.addEventListener('click', (e)=>{ if(e.target === m) closeAllModals(); });
    });
    document.querySelectorAll('.closeX').forEach(el=>{
      el.addEventListener('keydown', (ev)=>{
        if(ev.key === 'Enter' || ev.key === ' '){ ev.preventDefault(); el.click(); }
      });
    });

    /**************************************************************************
     * Pay button behaviour (UPI redirect)
     **************************************************************************/
    payBtn.addEventListener('click', async ()=>{
      if(!selectedAmount){
        openSadModal('No amount selected', 'Please pick an amount (‚Çπ20/‚Çπ50/‚Çπ70/‚Çπ100) before hitting Pay.');
        return;
      }
      const proceed = confirm(`You selected ‚Çπ${selectedAmount}. Proceed to open UPI app?`);
      if(!proceed){
        openSadModal('Payment cancelled', "Looks like you changed your mind. You can try again anytime ‚Äî thanks for considering!");
        return;
      }
      const upiHref = buildUpiHref(selectedAmount);
      sessionStorage.setItem('payment_attempt_ts', Date.now());
      sessionStorage.setItem('payment_amount', selectedAmount);
      // try to open UPI scheme
      window.location.href = upiHref;
      setTimeout(()=>{
        if(document.visibilityState === 'visible'){
          openSadModal('Unable to open payment app', 'If your device did not open the UPI app, try again or copy the UPI ID: ' + UPI_ID);
        }
      }, 2600);
    });

    payBtn.addEventListener('keydown', (ev)=>{
      if(ev.key === 'Enter' || ev.key === ' ') { ev.preventDefault(); payBtn.click(); }
    });

    /**************************************************************************
     * Twitch Helix API helpers
     *
     * - Uses /helix/users to get user id
     * - Uses /helix/streams to check if live
     * - Uses /helix/videos?type=archive to determine last archived stream time
     *
     * NOTE: You MUST set TWITCH_CLIENT_ID and TWITCH_TOKEN (app access token)
     **************************************************************************/
    function helixHeaders(){
      return {
        'Client-ID': TWITCH_CLIENT_ID,
        'Authorization': `Bearer ${TWITCH_TOKEN}`
      };
    }

    async function helixFetch(endpoint){
      const url = `https://api.twitch.tv/helix/${endpoint}`;
      const res = await fetch(url, { headers: helixHeaders(), cache: 'no-store' });
      if(!res.ok){
        const text = await res.text().catch(()=> 'no body');
        throw new Error(`Helix fetch failed ${res.status} : ${text}`);
      }
      return res.json();
    }

    let cachedUserId = null;
    async function getUserId(){
      if(cachedUserId) return cachedUserId;
      const resp = await helixFetch(`users?login=${encodeURIComponent(TWITCH_USER)}`);
      if(resp && resp.data && resp.data.length) {
        cachedUserId = resp.data[0].id;
        return cachedUserId;
      }
      throw new Error('User not found');
    }

    /**************************************************************************
     * Relative time utilities
     * - Produces outputs like: "30s ago", "5m ago", "1h ago", "2d ago", "3w ago", "1y ago"
     * - Efficient: only string formatting done on UI update intervals
     **************************************************************************/
    function relativeTimeFromDate(iso){
      if(!iso) return 'unknown';
      const d = new Date(iso);
      if(isNaN(d)) return 'unknown';
      return relativeTime(d);
    }

    function relativeTime(pastDate){
      const now = Date.now();
      const then = pastDate.getTime();
      let diff = Math.floor((now - then) / 1000); // seconds
      if(diff < 60) return `${diff}s ago`;
      const minutes = Math.floor(diff / 60);
      if(minutes < 60) return `${minutes}m ago`;
      const hours = Math.floor(minutes / 60);
      if(hours < 24) return `${hours}h ago`;
      const days = Math.floor(hours / 24);
      if(days < 7) return `${days}d ago`;
      const weeks = Math.floor(days / 7);
      if(weeks < 52) return `${weeks}w ago`;
      const years = Math.floor(weeks / 52);
      return `${years}y ago`;
    }

    /**************************************************************************
     * UI update helper: throttles DOM writes to avoid thrashing.
     **************************************************************************/
    let lastDisplayedText = '';
    function setLiveUI(isLive, text){
      // avoid unnecessary DOM writes
      if(liveText.innerText !== text) liveText.innerText = text;
      if(isLive){
        liveDot.classList.remove('off'); liveDot.classList.add('on');
        liveBtn.setAttribute('aria-pressed', 'true');
      } else {
        liveDot.classList.remove('on'); liveDot.classList.add('off');
        liveBtn.setAttribute('aria-pressed', 'false');
      }
    }

    /**************************************************************************
     * Primary Twitch check function
     * - Checks if user is live. If live: shows title + "live X ago"
     * - If offline: fetches last archive and shows "Last live X ago"
     * - Uses caching for user id
     **************************************************************************/
    let lastStreamStartIso = null;
    let lastArchiveIso = null;
    let currentlyLive = false;
    async function checkTwitchStatus(){
      // if TWITCH_CLIENT_ID or TWITCH_TOKEN not set, show helpful message
      if(!TWITCH_CLIENT_ID || TWITCH_CLIENT_ID === 'YOUR_CLIENT_ID_HERE' || !TWITCH_TOKEN || TWITCH_TOKEN === 'YOUR_APP_ACCESS_TOKEN_HERE'){
        setLiveUI(false, 'Status unavailable ‚Äî add client id & token');
        console.warn('Please set TWITCH_CLIENT_ID and TWITCH_TOKEN in the script before using Helix.');
        return;
      }

      try{
        const uid = await getUserId();

        // check streams endpoint
        const streamResp = await helixFetch(`streams?user_id=${encodeURIComponent(uid)}`);
        if(streamResp && streamResp.data && streamResp.data.length > 0){
          const s = streamResp.data[0];
          currentlyLive = true;
          lastStreamStartIso = s.started_at;
          // output like: LIVE on Twitch üéÆ ‚Äî <title> ‚Ä¢ live 5m ago
          const since = relativeTime(new Date(s.started_at));
          const shortTitle = (s.title || '').replace(/\s+/g,' ').trim();
          const display = `LIVE on Twitch üéÆ ‚Äî ${shortTitle} ‚Ä¢ live ${since}`;
          setLiveUI(true, display);
          return;
        } else {
          currentlyLive = false;
          // fetch recent video (archive)
          const vidResp = await helixFetch(`videos?user_id=${encodeURIComponent(uid)}&first=1&type=archive`);
          if(vidResp && vidResp.data && vidResp.data.length > 0){
            lastArchiveIso = vidResp.data[0].created_at;
            const ago = relativeTimeFromDate(lastArchiveIso);
            setLiveUI(false, `Offline ‚Äî Last live ${ago}`);
            return;
          } else {
            lastArchiveIso = null;
            setLiveUI(false, `Offline ‚Äî Last live unknown`);
            return;
          }
        }
      } catch(e){
        console.warn('checkTwitchStatus error', e);
        setLiveUI(false, 'Status unavailable');
      }
    }

    // initial check + polling
    checkTwitchStatus();
    // poll main status every 30s (Helix-friendly cadence)
    setInterval(checkTwitchStatus, 30000);

    // separate ticker to update relative times every 30s without hitting API
    setInterval(()=>{
      try{
        if(currentlyLive && lastStreamStartIso){
          const since = relativeTimeFromDate(lastStreamStartIso);
          // preserve title text if available
          const parts = liveText.innerText.split('‚Äî');
          const titlePart = parts[1] ? parts[1].split('‚Ä¢')[0].trim() : '';
          const newText = `LIVE on Twitch üéÆ ‚Äî ${titlePart}${titlePart ? ' ‚Ä¢ ' : ''}live ${since}`;
          setLiveUI(true, newText);
        } else if(!currentlyLive && lastArchiveIso){
          setLiveUI(false, `Offline ‚Äî Last live ${relativeTimeFromDate(lastArchiveIso)}`);
        }
      } catch(e){}
    }, 30000);

    // clicking live area opens the twitch channel
    liveBtn.addEventListener('click', ()=> window.open(`https://twitch.tv/${TWITCH_USER}`, '_blank', 'noopener'));
    liveBtn.addEventListener('keydown', (ev)=>{ if(ev.key === 'Enter' || ev.key === ' ') { ev.preventDefault(); liveBtn.click(); } });

    /**************************************************************************
     * Social icons keyboard support (open on Enter)
     **************************************************************************/
    const socialLinks = [
      { el: document.getElementById('discordLink'), url: 'https://discord.gg/K79u8V5FRd' },
      { el: document.getElementById('twitchLink'), url: `https://www.twitch.tv/${encodeURIComponent(TWITCH_USER)}` },
      { el: document.getElementById('youtubeLink'), url: 'https://www.youtube.com/@bobamasterfps' },
      { el: document.getElementById('twitterLink'), url: 'https://x.com/bobamasterfps' }
    ];
    socialLinks.forEach(item=>{
      item.el.addEventListener('keydown', (ev)=>{ if(ev.key === 'Enter' || ev.key === ' ') { ev.preventDefault(); window.open(item.url, '_blank', 'noopener'); } });
      item.el.addEventListener('click', (e)=> { e.stopPropagation(); /* anchor default will open */ });
    });

    /**************************************************************************
     * Page load: check url params for payment status
     **************************************************************************/
    (function checkUrlPaymentStatus(){
      try{
        const url = new URL(window.location.href);
        const status = url.searchParams.get('payment');
        if(status === 'success'){
          setTimeout(()=> openThanksModal(), 550);
        } else if(status === 'failed'){
          setTimeout(()=> openSadModal('Payment failed or cancelled', 'It looks like the payment didn‚Äôt finish. Try again or contact support.'), 550);
        } else {
          const attemptTs = sessionStorage.getItem('payment_attempt_ts');
          const amount = sessionStorage.getItem('payment_amount');
          if(attemptTs && amount){
            const diff = Date.now() - Number(attemptTs);
            if(diff > 3000 && diff < 180000){
              // recent attempt ‚Äî leave quiet, no modal by default
              console.log('recent payment attempt:', amount, 'ms ago', diff);
            }
          }
        }
      } catch(e){
        console.warn('Failed to parse URL payment status', e);
      }
    })();

    /**************************************************************************
     * Developer convenience: double-click pay toggles label
     **************************************************************************/
    payBtn.addEventListener('dblclick', ()=>{
      payBtn.innerText = (payBtn.innerText.trim().toLowerCase() === 'pay') ? 'Paid' : 'Pay';
      payBtn.style.transform = 'scale(1.06)';
      setTimeout(()=> payBtn.style.transform = '', 160);
    });

    /**************************************************************************
     * Accessibility: make sure modal close X are keyboard accessible (redundant safety)
     **************************************************************************/
    document.querySelectorAll('.closeX').forEach(el=>{
      el.addEventListener('keydown', (ev)=>{
        if(ev.key === 'Enter' || ev.key === ' '){ ev.preventDefault(); el.click(); }
      });
    });

    /**************************************************************************
     * Final logging for debug (safe)
     **************************************************************************/
    console.info('Page loaded. Twitch user:', TWITCH_USER, 'Snow allowed:', allowSnow, 'Device:', isAndroid ? 'Android' : (isIOS ? 'iOS' : 'Desktop'));

    /* =========================================================================
       End of script
       ========================================================================= */
  </script>

</body>
</html>

<!-- ==========================================================
     NEW SECTION ‚Äî Animated Live Stream Stats
     ========================================================== -->
<style>
  .live-stats {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 26px;
    align-items: center;
    justify-content: center;
  }
  .stat-card {
    width: 88%;
    max-width: 460px;
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 12px;
    padding: 12px 18px;
    text-align: center;
    font-size: 15px;
    font-weight: 600;
    color: #fff;
    box-shadow: 0 4px 22px rgba(0,0,0,0.6);
    text-shadow: 0 0 8px rgba(255,255,255,0.6);
    animation: fadeInStat 0.8s ease forwards;
    opacity: 0;
  }
  .stat-card.visible {
    opacity: 1;
  }
  @keyframes fadeInStat {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .stat-icon {
    display: inline-block;
    margin-right: 6px;
    font-size: 17px;
    vertical-align: middle;
  }
</style>

<div class="live-stats" id="liveStats" aria-live="polite">
  <div class="stat-card" id="followersCard"><span class="stat-icon">üü£</span>Followers: <span id="followersCount">--</span></div>
  <div class="stat-card" id="viewersCard"><span class="stat-icon">üî¥</span>Viewers: <span id="viewerCount">--</span></div>
  <div class="stat-card" id="chatCard"><span class="stat-icon">üí¨</span><span id="recentChat">Fetching latest message...</span></div>
</div>

<script>
/**********************************************************************
 * Animated Stream Stats (Live Integration)
 * - Followers count
 * - Current viewers (if live)
 * - Recent chat message (placeholder simulation)
 **********************************************************************/
async function updateStreamStats(){
  try{
    const uid = await getUserId();

    // Followers (Twitch Helix)
    const followResp = await helixFetch(`channels/followers?broadcaster_id=${encodeURIComponent(uid)}`);
    const followers = followResp.total ?? 0;
    document.getElementById('followersCount').innerText = followers.toLocaleString();
    document.getElementById('followersCard').classList.add('visible');

    // Viewers (if live)
    const streamResp = await helixFetch(`streams?user_id=${encodeURIComponent(uid)}`);
    if(streamResp.data && streamResp.data.length){
      const viewers = streamResp.data[0].viewer_count ?? 0;
      document.getElementById('viewerCount').innerText = viewers.toLocaleString();
    } else {
      document.getElementById('viewerCount').innerText = 'Offline';
    }
    document.getElementById('viewersCard').classList.add('visible');

    // Simulated ‚ÄúRecent Chat Message‚Äù (no chat API access via Helix)
    const chats = [
      '‚ÄúLet‚Äôs gooo!!üî•‚Äù', 
      '‚ÄúBoba clutch incoming üòé‚Äù', 
      '‚ÄúGG EZ‚Äù', 
      '‚ÄúThat aim tho üíÄ‚Äù', 
      '‚ÄúHyped for next match!‚Äù'
    ];
    const randomChat = chats[Math.floor(Math.random() * chats.length)];
    document.getElementById('recentChat').innerText = randomChat;
    document.getElementById('chatCard').classList.add('visible');
  }catch(err){
    console.warn('updateStreamStats failed', err);
  }
}

// Initial + interval refresh (every 60s)
updateStreamStats();
setInterval(updateStreamStats, 60000);
</script>

<!-- ==========================================================
     NEW SECTION ‚Äî Custom Intro Animation
     ========================================================== -->
<style>
  /* Fullscreen black overlay for intro fade */
  #introOverlay {
    position: fixed;
    inset: 0;
    background: #000;
    z-index: 2000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 1;
    transition: opacity 1.4s ease;
  }

  /* Center logo animation */
  #introLogo {
    font-family: 'Poppins', sans-serif;
    font-size: 38px;
    font-weight: 800;
    color: #fff;
    letter-spacing: -0.5px;
    text-shadow: 0 0 20px rgba(255,255,255,0.9), 0 0 60px rgba(255,255,255,0.3);
    opacity: 0;
    transform: scale(0.9);
    animation: logoPop 1.4s ease forwards;
  }

  @keyframes logoPop {
    0% { opacity: 0; transform: scale(0.9); text-shadow: none; }
    50% { opacity: 1; transform: scale(1.08); text-shadow: 0 0 40px rgba(255,255,255,0.9); }
    100% { opacity: 1; transform: scale(1); }
  }

  /* Card entry animation */
  #mainCard {
    opacity: 0;
    transform: translateY(40px);
    animation: cardRise 1.2s ease-out forwards;
    animation-delay: 1.4s; /* triggers after logo */
  }
  @keyframes cardRise {
    from { opacity: 0; transform: translateY(40px); filter: blur(6px); }
    to { opacity: 1; transform: translateY(0); filter: blur(0); }
  }

  /* Soft floating particle dots during intro */
  .intro-particle {
    position: fixed;
    border-radius: 50%;
    background: rgba(255,255,255,0.8);
    width: 4px; height: 4px;
    pointer-events: none;
    animation: particleDrift 2.2s ease-in forwards;
  }
  @keyframes particleDrift {
    from { transform: translateY(0) scale(1); opacity: 1; }
    to { transform: translateY(-120px) scale(0.4); opacity: 0; }
  }
</style>

<!-- Intro overlay markup -->
<div id="introOverlay">
  <div id="introLogo">BobaMasterFPS</div>
</div>

<script>
/**********************************************************************
 * Custom Intro Animation Script
 **********************************************************************/
window.addEventListener('load', () => {
  const overlay = document.getElementById('introOverlay');
  const snowDelay = 1500; // ms ‚Äî snow starts after this delay

  // Create particles (white floating dots)
  for(let i = 0; i < 24; i++){
    const p = document.createElement('div');
    p.className = 'intro-particle';
    p.style.left = Math.random()*100 + 'vw';
    p.style.bottom = (Math.random()*40)+'vh';
    p.style.width = p.style.height = (2 + Math.random()*4)+'px';
    p.style.animationDelay = (Math.random()*1)+'s';
    document.body.appendChild(p);
    setTimeout(()=> p.remove(), 2200);
  }

  // Fade overlay away after 1.6s
  setTimeout(() => {
    overlay.style.opacity = 0;
    setTimeout(()=> overlay.remove(), 1600);
  }, 1600);

  // Delay snow start for cinematic timing
  setTimeout(() => {
    if (typeof continuousSnow === 'function') {
      try { continuousSnow(); } catch(e){}
    }
  }, snowDelay);
});
</script>

<!-- ==========================================================
     NEW SECTION ‚Äî Animated Avatar Ring
     ========================================================== -->
<style>
  /* Base avatar wrapper enhancement */
  .avatar {
    position: relative;
    z-index: 1;
  }

  /* Spinning ring behind the avatar */
  .avatar-ring {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 150px;
    height: 150px;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    background: conic-gradient(
      from 0deg,
      rgba(255,255,255,0.0) 0%,
      rgba(255,255,255,0.4) 25%,
      rgba(255,255,255,0.9) 50%,
      rgba(255,255,255,0.4) 75%,
      rgba(255,255,255,0.0) 100%
    );
    animation: spinRing 10s linear infinite;
    filter: blur(6px);
    transition: all 0.8s ease;
    opacity: 0.65;
    pointer-events: none;
    z-index: 0;
  }

  /* Ring glows stronger and faster when live */
  .avatar-ring.live {
    animation-duration: 4s;
    opacity: 1;
    filter: blur(8px) brightness(1.4);
    box-shadow: 0 0 30px rgba(255,255,255,0.6), 0 0 60px rgba(255,255,255,0.3);
  }

  @keyframes spinRing {
    from { transform: translate(-50%, -50%) rotate(0deg); }
    to { transform: translate(-50%, -50%) rotate(360deg); }
  }
</style>

<script>
/**********************************************************************
 * Animated Avatar Ring Behavior
 * - Spins constantly
 * - Pulses brighter when Twitch live
 **********************************************************************/
document.addEventListener("DOMContentLoaded", () => {
  const avatar = document.querySelector('.avatar');
  if (!avatar) return;

  // Create and append the ring
  const ring = document.createElement('div');
  ring.className = 'avatar-ring';
  avatar.appendChild(ring);

  // Function to toggle ring state
  function updateRingGlow(isLive) {
    if (isLive) ring.classList.add('live');
    else ring.classList.remove('live');
  }

  // Observe Twitch live state dynamically
  const liveDot = document.getElementById('liveDot');
  if (liveDot) {
    const obs = new MutationObserver(() => {
      const live = liveDot.classList.contains('on');
      updateRingGlow(live);
    });
    obs.observe(liveDot, { attributes: true, attributeFilter: ['class'] });
    updateRingGlow(liveDot.classList.contains('on'));
  }
});
</script>

<!-- ==========================================================
     NEW SECTION ‚Äî Daily Stream Countdown (8PM IST)
     ========================================================== -->
<style>
  .countdown-wrap {
    margin-top: 18px;
    text-align: center;
    font-family: 'Poppins', sans-serif;
    font-weight: 700;
    color: #fff;
    text-shadow: 0 0 8px rgba(255,255,255,0.8), 0 0 20px rgba(255,255,255,0.2);
    letter-spacing: 1px;
    opacity: 0;
    animation: fadeInCountdown 1.2s ease forwards;
    animation-delay: 2s;
  }

  @keyframes fadeInCountdown {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .countdown {
    display: inline-flex;
    gap: 10px;
    justify-content: center;
    margin-top: 6px;
  }

  .time-box {
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 10px;
    padding: 10px 14px;
    min-width: 68px;
    box-shadow: 0 6px 30px rgba(0,0,0,0.6);
    text-align: center;
    transition: all 0.3s ease;
  }

  .time-box:hover {
    background: rgba(255,255,255,0.08);
    transform: translateY(-3px);
  }

  .time-value {
    display: block;
    font-size: 24px;
    font-weight: 800;
    color: #ffffff;
    text-shadow: 0 0 10px rgba(255,255,255,0.9);
    animation: glowPulse 1.8s ease-in-out infinite;
  }

  .time-label {
    font-size: 12px;
    color: rgba(255,255,255,0.7);
  }

  @keyframes glowPulse {
    0%, 100% { text-shadow: 0 0 6px rgba(255,255,255,0.7), 0 0 20px rgba(255,255,255,0.3); }
    50% { text-shadow: 0 0 14px rgba(255,255,255,1), 0 0 40px rgba(255,255,255,0.4); }
  }
</style>

<div class="countdown-wrap" id="countdownWrap">
  <div>‚è∞ Next Stream Starts In:</div>
  <div class="countdown" id="countdownTimer">
    <div class="time-box"><span class="time-value" id="days">--</span><span class="time-label">Days</span></div>
    <div class="time-box"><span class="time-value" id="hours">--</span><span class="time-label">Hours</span></div>
    <div class="time-box"><span class="time-value" id="minutes">--</span><span class="time-label">Mins</span></div>
    <div class="time-box"><span class="time-value" id="seconds">--</span><span class="time-label">Secs</span></div>
  </div>
</div>

<script>
/**********************************************************************
 * Daily Stream Countdown (8PM IST)
 * - Auto calculates next 8:00 PM IST from current visitor‚Äôs time
 * - Updates every second
 * - Displays LIVE message when countdown ends
 **********************************************************************/
(function initDailyCountdown(){
  const dEl = document.getElementById('days');
  const hEl = document.getElementById('hours');
  const mEl = document.getElementById('minutes');
  const sEl = document.getElementById('seconds');
  const wrap = document.getElementById('countdownWrap');

  // Helper: get next 8PM IST from now
  function getNextStreamTimeIST(){
    const now = new Date();
    // convert now to IST
    const nowIST = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }));
    const next = new Date(nowIST);
    next.setHours(20,0,0,0); // 8:00 PM

    // if current IST time already past 8pm, add 1 day
    if(nowIST.getHours() >= 20) next.setDate(next.getDate() + 1);

    // convert that back to user local time (so countdown works in their timezone)
    return new Date(next.toLocaleString('en-US', { timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone }));
  }

  function updateCountdown(){
    const target = getNextStreamTimeIST();
    const now = new Date().getTime();
    const distance = target.getTime() - now;

    if (distance <= 0) {
      wrap.innerHTML = "<div style='font-weight:800;font-size:22px;color:#7fffab;text-shadow:0 0 12px rgba(127,255,171,0.9),0 0 40px rgba(127,255,171,0.4)'>üî¥ We're LIVE now!</div>";
      return;
    }

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    dEl.textContent = days.toString().padStart(2, '0');
    hEl.textContent = hours.toString().padStart(2, '0');
    mEl.textContent = minutes.toString().padStart(2, '0');
    sEl.textContent = seconds.toString().padStart(2, '0');
  }

  updateCountdown();
  setInterval(updateCountdown, 1000);
})();
</script>

<!-- ==========================================================
     FIXED ‚Äî AI Chat Widget ("BobaBot") (robust toggle + accessibility)
     ========================================================== -->
<style>
  /* Chat bubble button */
  #bobaBotBubble {
    position: fixed;
    bottom: 28px;
    right: 28px;
    width: 64px;
    height: 64px;
    border-radius: 50%;
    background: rgba(255,255,255,0.1);
    box-shadow: 0 0 12px rgba(255,255,255,0.6), 0 0 40px rgba(255,255,255,0.2);
    backdrop-filter: blur(6px);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.25s ease;
    z-index: 99999; /* very high to avoid being covered */
    pointer-events: auto;
  }
  #bobaBotBubble:hover {
    background: rgba(255,255,255,0.25);
    transform: scale(1.05);
    box-shadow: 0 0 20px rgba(255,255,255,0.8);
  }
  #bobaBotBubble:focus { outline: 2px solid rgba(255,255,255,0.12); outline-offset: 4px; }

  #bobaBotBubble svg {
    width: 28px;
    height: 28px;
    fill: #fff;
    filter: drop-shadow(0 0 6px rgba(255,255,255,0.6));
  }

  /* Chat box container */
  #bobaChatBox {
    position: fixed;
    bottom: 105px;
    right: 28px;
    width: 320px;
    max-height: 420px;
    background: rgba(20,20,20,0.95);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 16px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.6), 0 0 20px rgba(255,255,255,0.3);
    display: none;
    flex-direction: column;
    overflow: hidden;
    z-index: 99998;
    animation: fadeInBot 0.3s ease;
    pointer-events: auto;
  }
  /* Force-open state (robust vs inline styles) */
  #bobaChatBox.open { display: flex !important; }

  @keyframes fadeInBot {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  #bobaChatHeader {
    background: rgba(255,255,255,0.05);
    padding: 10px 14px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-weight: 700;
    font-size: 15px;
    color: #fff;
    border-bottom: 1px solid rgba(255,255,255,0.06);
  }

  #bobaChatMessages {
    flex: 1;
    overflow-y: auto;
    padding: 14px;
    color: #eaeaea;
    font-size: 14px;
    line-height: 1.5;
  }

  .boba-msg { margin-bottom: 10px; animation: fadeMsg 0.3s ease; }
  @keyframes fadeMsg { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }

  .boba-bot { color: #fff; text-shadow: 0 0 8px rgba(255,255,255,0.6); }
  .boba-user { color: #bfbfbf; text-align: right; }

  #bobaChatInput {
    border: none;
    outline: none;
    width: 100%;
    background: rgba(255,255,255,0.04);
    padding: 10px;
    color: #fff;
    font-family: 'Poppins', sans-serif;
    font-size: 13px;
  }

  #bobaChatFooter { border-top: 1px solid rgba(255,255,255,0.06); }

  /* Typing dots animation (kept here for clarity) */
  .typingDots .dot { animation: blink 1s infinite alternate; }
  .typingDots .dot:nth-child(2){ animation-delay: .2s; }
  .typingDots .dot:nth-child(3){ animation-delay: .4s; }
  @keyframes blink { from { opacity:.2 } to { opacity:1 } }
</style>

<!-- Chat bubble and box -->
<div id="bobaBotBubble" title="Chat with BobaBot" role="button" aria-pressed="false" tabindex="0" aria-label="Open BobaBot chat">
  <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3C6.486 3 2 6.794 2 11.5c0 2.299 1.141 4.37 3.057 5.858L4 21l4.004-1.726C9.29 19.758 10.625 20 12 20c5.514 0 10-3.794 10-8.5S17.514 3 12 3z"/></svg>
</div>

<div id="bobaChatBox" aria-hidden="true" aria-live="polite">
  <div id="bobaChatHeader">
    ü§ñ BobaBot
    <button id="closeBobaChat" style="cursor:pointer;background:transparent;border:none;color:var(--muted);font-size:16px;" aria-label="Close chat">‚úï</button>
  </div>
  <div id="bobaChatMessages">
    <div class="boba-msg boba-bot">yo üå∏ what‚Äôs poppin bro ‚Äî i‚Äôm <b>BobaBot</b>, your chill twin üòé</div>
  </div>
  <div id="bobaChatFooter">
    <input id="bobaChatInput" type="text" placeholder="Type here..." autocomplete="off" />
  </div>
</div>

<script>
/**********************************************************************
 * FIXED BobaBot ‚Äî robust toggle, keyboard & outside-click close
 **********************************************************************/
(function initBobaBot(){
  const bubble = document.getElementById('bobaBotBubble');
  const box = document.getElementById('bobaChatBox');
  const input = document.getElementById('bobaChatInput');
  const msgs = document.getElementById('bobaChatMessages');
  const closeBtn = document.getElementById('closeBobaChat');

  // Utility to open/close
  function openBox() {
    box.classList.add('open');
    box.setAttribute('aria-hidden','false');
    bubble.setAttribute('aria-pressed','true');
    // focus input for quick typing
    setTimeout(()=> input.focus(), 120);
  }
  function closeBox() {
    box.classList.remove('open');
    box.setAttribute('aria-hidden','true');
    bubble.setAttribute('aria-pressed','false');
    bubble.focus();
  }
  function toggleBox() {
    if(box.classList.contains('open')) closeBox(); else openBox();
  }

  // Click / keyboard handlers
  bubble.addEventListener('click', (e)=> { e.stopPropagation(); toggleBox(); });
  bubble.addEventListener('keydown', (e)=> {
    if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleBox(); }
  });

  closeBtn.addEventListener('click', (e)=> { e.stopPropagation(); closeBox(); });

  // Close when clicking outside the chat box
  document.addEventListener('click', (e)=>{
    if(!box.classList.contains('open')) return;
    if(e.target === bubble || bubble.contains(e.target)) return;
    if(e.target === box || box.contains(e.target)) return;
    closeBox();
  }, true);

  // Close on Escape
  document.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape' && box.classList.contains('open')) closeBox();
  });

  // Messaging helpers (kept personality + typing)
  function addMsg(text, sender='bot'){
    const div = document.createElement('div');
    div.className = 'boba-msg boba-' + sender;
    div.innerHTML = text;
    msgs.appendChild(div);
    msgs.scrollTo({ top: msgs.scrollHeight, behavior: 'smooth' });
  }

  // Typing indicator
  let typingEl = null;
  function showTyping(){
    if(typingEl) return;
    typingEl = document.createElement('div');
    typingEl.className = 'boba-msg boba-bot typingDots';
    typingEl.innerHTML = 'typing<span class="dot">.</span><span class="dot">.</span><span class="dot">.</span>';
    msgs.appendChild(typingEl);
    msgs.scrollTo({ top: msgs.scrollHeight });
  }
  function hideTyping(){ if(typingEl){ typingEl.remove(); typingEl = null; } }

  const moods = ['üòé','üå∏','üôÇ','‚úã','üò≠','üî•','üíÄ'];
  const tone = () => moods[Math.floor(Math.random()*moods.length)];

  const replies = {
    "schedule": "yo chill out g üå∏ ‚Äî i go live every day at <b>8PM IST</b> üòé",
    "time": "stream hits at <b>8PM IST</b> sharp ‚è∞",
    "valo": "nah fr bro 30-min warmup daily before i cook in Valorant üî•",
    "stream": "next one‚Äôs today 8PM IST g. don‚Äôt goonin just pull up üò≠",
    "support": "support the fam üëâ <b>lazy.saifali@fam</b> üå∏ appreciate the love bro!",
    "who": "i‚Äôm boba‚Äôs mini version with fewer braincells & more sarcasm üíÄ",
    "motivate": "yo listen up bro üå∏ keep pushing, small W‚Äôs stack up üòé",
    "funny": "man i‚Äôd tell u a joke but i‚Äôm already the punchline ‚úã"
  };

  const randomReplies = [
    "yo wsp bro üòé",
    "nah fr chill g i‚Äôm one of y‚Äôall ‚úã",
    "bro stop goonin and touch some sunlight üå∏",
    "gng bro we vibin today üò≠",
    "ayyo u typed fast damn üòé",
    "lemme guess... u late to stream again huh üíÄ",
    "i swear u guys only open this when i‚Äôm offline üò≠"
  ];

  input.addEventListener('keydown', e=>{
    if(e.key === 'Enter' && input.value.trim()){
      const msg = input.value.trim();
      addMsg(msg, 'user');
      input.value = '';
      handleResponse(msg.toLowerCase());
    }
  });

  function handleResponse(msg){
    let res = null;
    for(let key in replies){ if(msg.includes(key)){ res = replies[key]; break; } }
    if(!res){
      if(msg.includes('joke')){
        const jokes = [
          "bro u ever rage quit so hard u uninstall ur self üå∏",
          "nah this ping made me see jesus üò≠",
          "keyboard crying rn from all my clutches üíÄ"
        ];
        res = jokes[Math.floor(Math.random()*jokes.length)];
      } else res = randomReplies[Math.floor(Math.random()*randomReplies.length)];
    }

    showTyping();
    const delay = 900 + Math.random()*1200; // natural pause
    setTimeout(()=>{ hideTyping(); addMsg(res + ' ' + tone(), 'bot'); }, delay);
  }

  // Auto-greet after 12s (does not open box forcibly)
  setTimeout(()=>{
    if(!box.classList.contains('open')) {
      showTyping();
      setTimeout(()=>{ hideTyping(); addMsg("yo üå∏ u chillin? next stream 8PM IST btw üòé", 'bot'); }, 1400);
    }
  }, 12000);
})();
</script>

